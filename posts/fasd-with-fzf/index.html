<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>终端下快速打开编辑文件、进入目录、键入历史命令 | ThunderBuddy</title><meta property="og:title" content="终端下快速打开编辑文件、进入目录、键入历史命令 - ThunderBuddy"><meta property="og:type" content="article"><meta property="article:published_time" content="2016-01-04T14:35:46+08:00"><meta property="article:modified_time" content="2016-01-04T14:35:46+08:00"><meta name=Keywords content><meta name=description content="终端下快速打开编辑文件、进入目录、键入历史命令"><meta name=author content="凯奇"><meta property="og:url" content="http://kudou61.github.io/posts/fasd-with-fzf/"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/style.css><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><a id=logo href=http://kudou61.github.io/>ThunderBuddy</a></div><div><nav id=nav-menu class=clearfix><a href=http://kudou61.github.io/>首页</a>
<a href=http://kudou61.github.io/archives/ title=归档>归档</a>
<a href=http://kudou61.github.io/about/ title=关于>关于</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>终端下快速打开编辑文件、进入目录、键入历史命令</h1></header><date class="post-meta meta-date">2016年1月4日</date><div class=post-meta><span id=busuanzi_container_page_pv>|<span id=busuanzi_value_page_pv></span><span>
阅读</span></span></div><div class=post-content><p>如果你经常使用终端，那么你必然会经常切换目录。如果频繁的使用 cd 命令，那么会非常浪费时间。</p><p>有没有比较高效的方法呢，答案是肯定的。</p><p>如果只需要解决切换目录的问题的话，用 autojump 就可以实现，使用 j 键加目录可以快速的递归查找到该目录，但并不是最好的方法。</p><p>这里推荐两个工具，<a href=https://github.com/clvv/fasd>fasd</a> and <a href=https://github.com/junegunn/fzf>fzf</a>，可以满足上面的三个需求。</p><p>fasd 通过记录用户经常使用的目录，给每个目录分配一定的权重，频繁访问的目录权重越大。而当你使用 fasd 模糊查找一个目录时，它会查询符合条件的权重最大的目录。</p><h2 id=安装>安装</h2><p>Mac 下推荐使用 brew 安装。</p><pre><code class=language-console data-lang=console>brew install fasd fzf
</code></pre><p><del>Mac 安装完 fasd 后并不能直接使用，zsh 会提示 commad not found。
这里使用的是 zsh，在终端中键入如下命令：（和 fzf 一起使用的时候会有冲突，这里就删除了）</del></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#39;eval &#34;$(fasd --init auto)&#34;&#39;</span> &gt;&gt; ~/.zshrc
</code></pre></div><h2 id=配置>配置</h2><p>安装完后可以安装官方的配置，在.bashrc 中加入如下代码可以配置 fasd。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>alias a<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -a&#39;</span>        <span style=color:#75715e># any</span>
alias s<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -si&#39;</span>       <span style=color:#75715e># show / search / select</span>
alias d<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -d&#39;</span>        <span style=color:#75715e># directory</span>
alias f<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -f&#39;</span>        <span style=color:#75715e># file</span>
alias sd<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -sid&#39;</span>     <span style=color:#75715e># interactive directory selection</span>
alias sf<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd -sif&#39;</span>     <span style=color:#75715e># interactive file selection</span>
alias zz<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;fasd_cd -d -i&#39;</span> <span style=color:#75715e># cd with interactive selection</span>
</code></pre></div><p>fzf 要和 fasd 配合使用的话需要在加入如下代码。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>v<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  local file
  file<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>fasd -Rfl <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> | fzf -1 -0 --no-sort +m<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> vi <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
<span style=color:#f92672>}</span>

z<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  local dir
  dir<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>fasd -Rdl <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> | fzf -1 -0 --no-sort +m<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> cd <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
<span style=color:#f92672>}</span>

fh<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  eval <span style=color:#66d9ef>$(</span> <span style=color:#f92672>([</span> -n <span style=color:#e6db74>&#34;</span>$ZSH_NAME<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> fc -l <span style=color:#ae81ff>1</span> <span style=color:#f92672>||</span> history<span style=color:#66d9ef>)</span> | fzf +s --tac | sed <span style=color:#e6db74>&#39;s/ *[0-9]* *//&#39;</span><span style=color:#f92672>)</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>配置完后需要重启生效，或者执行：</p><pre><code class=language-console data-lang=console>source .bashrc
</code></pre><h2 id=使用>使用</h2><p>fasd 会记录你使用命令的历史和频率，按照权重排列出来。</p><p>通过和 fzf 配合可以实现高亮和动态模糊匹配。</p><p>比如你曾经这样切换目录</p><pre><code class=language-console data-lang=console>cd Project/blog
</code></pre><p>然后你使用 z 回车后，这个路径就会出现在你的候选中。
![screen](/img/2016-01-04 下午 3.02.08.png)</p><p>同样的，使用 v 也可以快速打开历史编辑过的文件。</p><p>使用 fh 可以打开历史输入命令。</p><p>你使用的频率越高，候选的命令就越准确。</p><p>还有很多高效的用法，大家可以自己探索。</p></div><div class="post-meta meta-tags">没有标签</div></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=kudou61/CommentsBackup issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer id=footer><div>&copy; 2021 <a href=http://kudou61.github.io/>ThunderBuddy By 凯奇</a></div><br><div><div class=github-badge><a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a></div><div class=github-badge><a href=https://www.flysnow.org/ target=_black><span class=badge-subject>Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a></div><div class=github-badge><a href=https://github.com/flysnow-org/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a></div></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src="/js/totop.js?v=0.0.0" async></script><script type=text/javascript src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async></script></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=http://kudou61.github.io/>
<button type=submit class="submit icon-search"></button></form></section><section class=widget><h3 class=widget-title>最近文章</h3><ul class=widget-list><li><a href=http://kudou61.github.io/posts/my-first-post/ title="My First Post">My First Post</a></li><li><a href=http://kudou61.github.io/posts/auto-mount/ title=树莓派自动挂载U盘>树莓派自动挂载U盘</a></li><li><a href=http://kudou61.github.io/posts/public-key-login/ title=使用SSH公钥登陆>使用SSH公钥登陆</a></li><li><a href=http://kudou61.github.io/posts/raspberry/ title=raspberry的一些配置>raspberry的一些配置</a></li><li><a href=http://kudou61.github.io/posts/githug/ title=githug小游戏>githug小游戏</a></li><li><a href=http://kudou61.github.io/posts/easy-to-install/ title=每次都要安装的东西>每次都要安装的东西</a></li><li><a href=http://kudou61.github.io/posts/fasd-with-fzf/ title=终端下快速打开编辑文件、进入目录、键入历史命令>终端下快速打开编辑文件、进入目录、键入历史命令</a></li><li><a href=http://kudou61.github.io/posts/install-go/ title=Go语言>Go语言</a></li><li><a href=http://kudou61.github.io/posts/java-io/ title="Java Input/OutputStreamReader读写文件">Java Input/OutputStreamReader读写文件</a></li><li><a href=http://kudou61.github.io/posts/java-thread/ title=Java多线程>Java多线程</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories/>分类</a></h3><ul class=widget-list><li><a href=http://kudou61.github.io/categories/java%E5%AD%A6%E4%B9%A0/>Java学习 (1)</a></li><li><a href=http://kudou61.github.io/categories/%E5%B0%8F%E6%8A%80%E5%B7%A7/>小技巧 (1)</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags/>标签</a></h3><div class=tagcloud><a href=http://kudou61.github.io/tags/sql/>sql</a>
<a href=http://kudou61.github.io/tags/%E7%AC%94%E8%AE%B0/>笔记</a></div></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=http://kudou61.github.io/index.xml>文章 RSS</a></li></ul></section></div></div></div></div></body></html>